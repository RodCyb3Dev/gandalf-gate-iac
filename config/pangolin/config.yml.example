##############################################################################
# PANGOLIN CONFIGURATION - EXAMPLE FILE
# 
# NOTE: This file is templated by Ansible during deployment.
# Sensitive values (passwords, API keys) are injected from environment variables
# or Ansible vault during the deployment process.
#
# For local development, copy this file to config.yml and fill in the values.
# For production, use Ansible to deploy (it will template the file automatically).
##############################################################################

app:
  dashboard_url: "https://ghost.rodneyops.com"
  log_level: "warn"
  save_logs: true
  log_failed_attempts: true

domains:
  # Gandalf-Gate (Hetzner)
  primary_domain:
    base_domain: "rodneyops.com"
    cert_resolver: "cloudflare"
    prefer_wildcard_cert: true
  
  hetzner_cloud_provider_hogwarts_host:
    base_domain: "grafana.rodneyops.com"
    cert_resolver: "cloudflare"
    prefer_wildcard_cert: false
  
  hetzner_cloud_provider_kenobi_hub:
    base_domain: "rodify.rodneyops.com" 
    cert_resolver: "cloudflare"
    prefer_wildcard_cert: false
  
  hetzner_cloud_provider_status:
    base_domain: "status.rodneyops.com"
    cert_resolver: "cloudflare"
    prefer_wildcard_cert: false
  
  hetzner_cloud_provider_dockge:
    base_domain: "dockge.rodneyops.com"
    cert_resolver: "cloudflare"
    prefer_wildcard_cert: false

server:
  external_port: 3000
  internal_port: 3001
  next_port: 3002
  internal_hostname: "pangolin"
  session_cookie_name: "p_session_token"
  resource_access_token_param: "p_token"
  resource_access_token_headers:
    id: "P-Access-Token-Id"
    token: "P-Access-Token"
  resource_session_request_param: "p_session_request"
  allowed_private_ips:
    - "10.0.0.0/8"        # Internal network range
    - "172.16.0.0/12"     # Docker internal
    - "192.168.0.0/16"    # Local network
    - "100.64.0.0/10"     # Tailscale range
    - "157.180.81.131/32" # Add Coolify's specific IP

traefik:
  http_entrypoint: "web"
  https_entrypoint: "websecure"
  additional_middlewares:
    - "security-headers@file"
    - "rate-limit@file"

gerbil:
  start_port: 51820
  base_endpoint: "gw.rodneyops.com"
  use_subdomain: false
  subnet_group: "10.200.0.0/16"
  block_size: 24
  site_block_size: 28

rate_limits:
  global:
    window_minutes: 5
    max_requests: 500

email:
  smtp_host: "smtp.protonmail.ch"
  smtp_port: 587
  smtp_user: "info@kodeflash.dev"
  smtp_pass: "CHANGE_ME"  # Set via PANGOLIN_SMTP_PASS environment variable
  smtp_secure: true
  no_reply: "no-reply@kodeflash.dev"

users:
  server_admin:
    email: "rodney@kodeflash.dev"
    password: "CHANGE_ME"  # Set via PANGOLIN_ADMIN_PASSWORD environment variable

flags:
  require_email_verification: true
  disable_signup_without_invite: true
  disable_user_create_org: false
  allow_raw_resources: true
  allow_base_domain_resources: false

